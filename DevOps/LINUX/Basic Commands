

# replace mysql with MYSQL and copy to a new file
sed s/mysql/MYSQL/g snort.conf.copy > snort.conf.copy2

# searching for '$Work' string and showing 5 lines before/above, not showing line containing '$Work', showing line numbers as well
nl /etc/rsyslog.conf |grep '$Work' -B 5 | grep -v '$Work'

# searching for sources.list list and removing it, starting with root
find /var/lib/apt/sources.list -type f -exec rm {} \;

#
find /var/lib/apt/sources.list -type f -exec rm {} \;

CWD="$(pwd)"

# finding files with json and conf extensions, using logical -or, line numbers included
 sudo find /etc -name *.json -o -name *.conf | nl
 sudo find /etc -name java* -type f  -o -type d -name *java* |nl > nginx.file3

# showing only words from a first column (-f1) and delimiter is comma (-d:). results are numbered

# CUT command
 sudo cat /etc/passwd |cut -d: -f1 |nl

# GREP command 
# (^) - start of each line
# ([^:]*) - no colons
 sudo cat /etc/passwd |grep -o '^[^:]*' |nl

# AWK command
 sudo cat /etc/passwd |awk -F ':' '{print $1}'|nl

# excluding errors ( 2>/dev/null )
    find /etc 2>/dev/null -type f -size +500k

# showing size of a file, using cut
path=/path/to/file
sudo ls -lash $path | cut -d' ' -f1

# deleting files larger than 1K
 find . -type f -size +1k -exec rm -f {} \;

# SED and AWK

# (-e) is necessary if multiple instructions are supplied on command line 
sed 's/ MA/ , Massachusetts/; s/ PA/, Pennsylvania' email.list
sed -e 's/ MA/ , Massachusetts/' -e 's/ PA/ , Pennsylvania/' email.list

# replacing " ," with ", "
# converting (,Massachusetts) to (, Massachusetts)

sed "s/ ,/, /" email.list2
sed -e "s/ ,/, /" email.list2

# removing space from first column
sed -e "s/^ *//" email.list

# using scripts
sed -f sedscr file
# 'file' that is changed
# 'sedscr' file containing commands for the script
cat sedscr
s/ MA/, Massachusetts/
s/ PA/, Pennsylvania/
s/ CA/, California/
s/ VA/, Virginia/
s/ OK/, Oklahoma/

# example
sed -f sedscr email.list
# capturing changes in a newfile
sed -f sedscr email.list > email.list.new

# prints first field from the output
 awk '{print $1}' email.list

# printing multiple columns
awk '{print $3" "$4" "$5}' email.list

# selecting based on value
awk '/VA/' email.list


